<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>간단 채팅 앱</title>
    <style>
        /* CSS 스타일링 */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,
                Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: #f4f4f4;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        .chat-container {
            width: 100%;
            max-width: 500px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            height: 80vh;
            max-height: 700px;
        }

        header {
            background-color: #007bff;
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 1.2rem;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
        }

        /* 메시지 창 */
        .chat-window {
            flex-grow: 1; /* 남은 공간을 모두 차지 */
            padding: 20px;
            overflow-y: auto; /* 메시지 많아지면 스크롤 */
            border-bottom: 1px solid #ddd;
        }

        #message-list {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }

        .message-item {
            margin-bottom: 15px;
            padding: 10px;
            background-color: #e9ecef;
            border-radius: 8px;
            max-width: 80%;
            word-wrap: break-word; /* 긴 텍스트 줄바꿈 */
        }
        
        /* 유저 이름 스타일 (요청하신 부분) */
        .message-username {
            display: block; /* 이름이 메시지 위에 오도록 */
            font-size: 0.8em; /* 작게 표시 */
            font-weight: bold;
            color: #495057;
            margin-bottom: 4px;
        }

        .message-text {
            font-size: 0.95em;
            color: #212529;
            margin: 0;
        }

        /* 입력 폼 */
        #chat-form {
            display: flex;
            padding: 15px;
            background-color: #f8f9fa;
            border-top: 1px solid #ddd;
            border-bottom-left-radius: 8px;
            border-bottom-right-radius: 8px;
        }

        #username-input {
            width: 100px; /* 이름 입력칸 */
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-right: 10px;
        }

        #message-input {
            flex-grow: 1; /* 메시지 입력칸이 남은 공간 차지 */
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-right: 10px;
        }

        #send-button {
            padding: 10px 15px;
            border: none;
            background-color: #007bff;
            color: white;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }

        #send-button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

    <div class="chat-container">
        <header>간단 채팅방</header>

        <div class="chat-window" id="chat-window">
            <ul id="message-list">
                </ul>
        </div>

        <form id="chat-form">
            <input type="text" id="username-input" placeholder="이름" required>
            <input type="text" id="message-input" placeholder="메시지를 입력하세요..." required>
            <button type="submit" id="send-button">전송</button>
        </form>
    </div>

    <script>
        // JavaScript 기능 구현

        // 필요한 HTML 요소들을 변수에 저장
        const chatForm = document.getElementById('chat-form');
        const usernameInput = document.getElementById('username-input');
        const messageInput = document.getElementById('message-input');
        const messageList = document.getElementById('message-list');
        const chatWindow = document.getElementById('chat-window');

        // 폼 제출(전송 버튼 클릭) 이벤트 처리
        chatForm.addEventListener('submit', function(event) {
            // 1. 폼의 기본 동작(페이지 새로고침) 방지
            event.preventDefault();

            // 2. 입력된 이름과 메시지 값 가져오기 (앞뒤 공백 제거)
            const username = usernameInput.value.trim();
            const message = messageInput.value.trim();

            // 3. 이름과 메시지가 모두 입력되었는지 확인
            if (username === '' || message === '') {
                alert('이름과 메시지를 모두 입력해주세요.');
                return; // 함수 종료
            }

            // 4. 새로운 메시지 아이템(li) 생성
            const li = document.createElement('li');
            li.className = 'message-item'; // CSS 클래스 적용

            // 5. 유저 이름을 표시할 span 태그 생성 (요청하신 기능)
            const usernameSpan = document.createElement('span');
            usernameSpan.className = 'message-username'; // CSS 클래스 적용
            usernameSpan.textContent = username; // 이름 설정

            // 6. 메시지 본문을 표시할 p 태그 생성
            const messageText = document.createElement('p');
            messageText.className = 'message-text'; // CSS 클래스 적용
            messageText.textContent = message; // 메시지 설정

            // 7. li 요소 안에 이름(span)과 메시지(p) 추가
            li.appendChild(usernameSpan);
            li.appendChild(messageText);

            // 8. 완성된 li를 메시지 목록(ul)에 추가
            messageList.appendChild(li);

            // 9. 메시지 입력 후 입력창 비우기
            messageInput.value = '';
            messageInput.focus(); // 메시지 입력창에 다시 포커스

            // 10. 새 메시지가 추가되면 스크롤을 맨 아래로 이동
            chatWindow.scrollTop = chatWindow.scrollHeight;
        });
    </script>

</body>
</html>
